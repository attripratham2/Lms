"use strict";(self.webpackChunkleemons_plugin_calendar_frontend_react=self.webpackChunkleemons_plugin_calendar_frontend_react||[]).push([[7738],{"./src/components/KanbanTaskCard/KanbanTaskCard.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Playground:()=>Playground,__namedExportsOrder:()=>__namedExportsOrder,default:()=>KanbanTaskCard_stories});__webpack_require__("../../../node_modules/react/index.js");var KanbanTaskCard=__webpack_require__("./src/components/KanbanTaskCard/KanbanTaskCard.js");const mock={calendars:[{id:"9c1ec044-beb7-4f86-b1db-0c8b365ee786",key:"plugins.users.calendar.agent.d89b69e7-c428-407b-b0e4-f0feca511fb7",name:"d89b69e7-c428-407b-b0e4-f0feca511fb7",icon:"https://dev.leemons.io/api/leebrary/file/53720f16-dfad-4ac5-a5dd-232e300f5104?authorization=%5B%22eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyQWdlbnQiOiI3N2VjYjdlNy0zMWI0LTRjM2EtOTMxZi1lNDBjNDQ4YWQ2YjQiLCJpYXQiOjE2NTM3Mjc5MDQsImV4cCI6MTY1MzgxNDMwNH0.Nbv0MMeY65CgN3ragf9qGcXDoKDC7cGfRjUDu1SvwrM%22%5D",bgColor:"#4F96FF",borderColor:"#4F96FF",section:"plugins.users.calendar.user_section",deleted:0,created_at:"2022-01-24T08:59:25.000Z",updated_at:"2022-01-24T08:59:25.000Z",deleted_at:null},{id:"144ca017-2e6e-48d1-96ed-f2ccedb970a0",key:"plugins.calendar.config.d176cba8-0503-4b31-b66b-db711f9ec55f.holidays_vacation",name:"plugins.calendar.holidays_vacation",icon:"https://dev.leemons.io/api/leebrary/file/53720f16-dfad-4ac5-a5dd-232e300f5104?authorization=%5B%22eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyQWdlbnQiOiI3N2VjYjdlNy0zMWI0LTRjM2EtOTMxZi1lNDBjNDQ4YWQ2YjQiLCJpYXQiOjE2NTM3Mjc5MDQsImV4cCI6MTY1MzgxNDMwNH0.Nbv0MMeY65CgN3ragf9qGcXDoKDC7cGfRjUDu1SvwrM%22%5Dhttps://dev.leemons.io/api/leebrary/file/53720f16-dfad-4ac5-a5dd-232e300f5104?authorization=%5B%22eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyQWdlbnQiOiI3N2VjYjdlNy0zMWI0LTRjM2EtOTMxZi1lNDBjNDQ4YWQ2YjQiLCJpYXQiOjE2NTM3Mjc5MDQsImV4cCI6MTY1MzgxNDMwNH0.Nbv0MMeY65CgN3ragf9qGcXDoKDC7cGfRjUDu1SvwrM%22%5D",bgColor:"#b8e79c",borderColor:"#b8e79c",section:"plugins.users.calendar.user_section",deleted:0,created_at:"2022-01-24T12:12:27.000Z",updated_at:"2022-01-24T12:12:27.000Z",deleted_at:null},{id:"ad5b591c-c352-4dca-96d3-e603eff8d516",key:"plugins.calendar.config.d176cba8-0503-4b31-b66b-db711f9ec55f.non_school_day",name:"plugins.calendar.non_school_day",icon:"https://dev.leemons.io/api/leebrary/file/53720f16-dfad-4ac5-a5dd-232e300f5104?authorization=%5B%22eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyQWdlbnQiOiI3N2VjYjdlNy0zMWI0LTRjM2EtOTMxZi1lNDBjNDQ4YWQ2YjQiLCJpYXQiOjE2NTM3Mjc5MDQsImV4cCI6MTY1MzgxNDMwNH0.Nbv0MMeY65CgN3ragf9qGcXDoKDC7cGfRjUDu1SvwrM%22%5D",bgColor:"#e79ccf",borderColor:"#e79ccf",section:"plugins.users.calendar.user_section",deleted:0,created_at:"2022-01-24T12:12:27.000Z",updated_at:"2022-01-24T12:12:27.000Z",deleted_at:null},{id:"d64a453c-a3ff-400d-9c7b-df01295c6743",key:"plugins.calendar.config.d176cba8-0503-4b31-b66b-db711f9ec55f.regional_holidays",name:"plugins.calendar.regional_holidays",icon:"https://dev.leemons.io/api/leebrary/file/53720f16-dfad-4ac5-a5dd-232e300f5104?authorization=%5B%22eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyQWdlbnQiOiI3N2VjYjdlNy0zMWI0LTRjM2EtOTMxZi1lNDBjNDQ4YWQ2YjQiLCJpYXQiOjE2NTM3Mjc5MDQsImV4cCI6MTY1MzgxNDMwNH0.Nbv0MMeY65CgN3ragf9qGcXDoKDC7cGfRjUDu1SvwrM%22%5D",bgColor:"#d29ce7",borderColor:"#d29ce7",section:"plugins.users.calendar.user_section",deleted:0,created_at:"2022-01-24T12:12:27.000Z",updated_at:"2022-01-24T12:12:27.000Z",deleted_at:null}],events:[{id:"642b7dd7-a219-4792-87f3-5e62c6b2f4a4",title:"aaaaaaa",calendar:"9c1ec044-beb7-4f86-b1db-0c8b365ee786",startDate:"2022-01-11T23:00:00.000Z",endDate:"2022-01-13T22:59:59.000Z",isAllDay:1,repeat:"dont_repeat",type:"plugins.calendar.task",status:"active",data:{column:"734c8a98-ce1b-4d8a-912f-f65eeb850f24"},deleted:0,created_at:"2022-01-24T09:59:50.000Z",updated_at:"2022-01-24T09:59:50.000Z",deleted_at:null,fromCalendar:!0},{id:"a5182556-be4e-452f-ad42-36c3490d2771",title:"wef",calendar:"9c1ec044-beb7-4f86-b1db-0c8b365ee786",startDate:"2022-01-05T09:03:10.000Z",endDate:"2022-01-06T09:03:10.000Z",isAllDay:0,repeat:"dont_repeat",type:"plugins.calendar.task",status:"active",data:{column:"734c8a98-ce1b-4d8a-912f-f65eeb850f24"},deleted:0,created_at:"2022-01-24T09:59:27.000Z",updated_at:"2022-01-24T10:00:16.000Z",deleted_at:null,fromCalendar:!0},{id:"d067ff9c-8eda-4590-9e81-a6c62ac5b79e",title:"vvvvvvv",calendar:"9c1ec044-beb7-4f86-b1db-0c8b365ee786",startDate:"2022-01-05T23:00:00.000Z",endDate:"2022-01-06T22:59:59.000Z",isAllDay:1,repeat:"dont_repeat",type:"plugins.calendar.task",status:"active",data:{column:"cc5b9b3a-8f24-4c4d-bc0d-209234e27ce9"},deleted:0,created_at:"2022-01-24T10:00:04.000Z",updated_at:"2022-01-24T10:00:04.000Z",deleted_at:null,fromCalendar:!0},{id:"cf3af4f6-5910-4664-903c-90ce27ca51b8",title:"hrrh",calendar:"144ca017-2e6e-48d1-96ed-f2ccedb970a0",startDate:"2022-01-06T23:00:00.000Z",endDate:"2022-01-07T22:59:59.000Z",isAllDay:1,repeat:"dont_repeat",type:"plugins.calendar.holidays_vacation",status:"active",data:null,deleted:0,created_at:"2022-01-24T12:12:41.000Z",updated_at:"2022-01-24T12:12:41.000Z",deleted_at:null}],userCalendar:{id:"9c1ec044-beb7-4f86-b1db-0c8b365ee786",key:"plugins.users.calendar.agent.d89b69e7-c428-407b-b0e4-f0feca511fb7",name:"d89b69e7-c428-407b-b0e4-f0feca511fb7",icon:null,bgColor:"#4F96FF",borderColor:"#4F96FF",section:"plugins.users.calendar.user_section",deleted:0,created_at:"2022-01-24T08:59:25.000Z",updated_at:"2022-01-24T08:59:25.000Z",deleted_at:null},ownerCalendars:[{id:"9c1ec044-beb7-4f86-b1db-0c8b365ee786",key:"plugins.users.calendar.agent.d89b69e7-c428-407b-b0e4-f0feca511fb7",name:"d89b69e7-c428-407b-b0e4-f0feca511fb7",icon:null,bgColor:"#4F96FF",borderColor:"#4F96FF",section:"plugins.users.calendar.user_section",deleted:0,created_at:"2022-01-24T08:59:25.000Z",updated_at:"2022-01-24T08:59:25.000Z",deleted_at:null}]};var jsx_runtime=__webpack_require__("../../../node_modules/react/jsx-runtime.js");const KanbanTaskCard_stories={title:"Leemons/Kanban/KanbanTaskCard",parameters:{component:KanbanTaskCard.zZ,design:{type:"figma"}},argTypes:{}},Template=_ref=>{let{children,...props}=_ref;return(0,jsx_runtime.jsx)(KanbanTaskCard.zZ,{...props,value:mock.events[0],config:mock,children})};Template.displayName="Template";const Playground=Template.bind({});Playground.args={...KanbanTaskCard.pD,labels:{delivery:"Delivery"}},Playground.parameters={...Playground.parameters,docs:{...Playground.parameters?.docs,source:{originalSource:"({\n  children,\n  ...props\n}) => {\n  return <KanbanTaskCard {...props} value={mock.events[0]} config={mock}>\n      {children}\n    </KanbanTaskCard>;\n}",...Playground.parameters?.docs?.source}}};const __namedExportsOrder=["Playground"]},"./src/components/KanbanTaskCard/KanbanTaskCard.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{pD:()=>KANBAN_TASK_CARD_DEFAULT_PROPS,zZ:()=>KanbanTaskCard});var react=__webpack_require__("../../../node_modules/react/index.js"),Box=__webpack_require__("../../../node_modules/@bubbles-ui/components/es/layout/Box/Box.js"),ImageLoader=__webpack_require__("../../../node_modules/@bubbles-ui/components/es/misc/ImageLoader/ImageLoader.js"),Paper=__webpack_require__("../../../node_modules/@bubbles-ui/components/es/layout/Paper/Paper.js"),TextClamp=__webpack_require__("../../../node_modules/@bubbles-ui/components/es/typography/TextClamp/TextClamp.js"),Text=__webpack_require__("../../../node_modules/@bubbles-ui/components/es/typography/Text/Text.js"),Avatar=__webpack_require__("../../../node_modules/@bubbles-ui/components/es/informative/Avatar/Avatar.js"),Paragraph=__webpack_require__("../../../node_modules/@bubbles-ui/components/es/typography/Paragraph/Paragraph.js"),dayjs_min=__webpack_require__("../../../node_modules/dayjs/dayjs.min.js"),dayjs_min_default=__webpack_require__.n(dayjs_min),lodash=__webpack_require__("../../../node_modules/lodash/lodash.js"),create_styles=__webpack_require__("../../../node_modules/@mantine/styles/esm/tss/create-styles.js"),theme_mixins=__webpack_require__("../../../node_modules/@bubbles-ui/components/es/theme.mixins.js"),colord=__webpack_require__("../../../node_modules/colord/index.mjs");const KanbanTaskCardStyles=(0,create_styles.k)(((theme,_ref)=>{let{bgColor,titleMargin,progress}=_ref;return{root:{...(0,theme_mixins.Pt)(theme.fontSizes[1],400),width:"100%",backgroundColor:theme.colors.uiBackground04,borderWidth:"2px",borderStyle:"solid",borderColor:theme.colors.interactive03h,padding:0,overflow:"hidden",whiteSpace:"normal"},title:{...(0,theme_mixins.Pt)(theme.fontSizes[2],500),color:theme.colors.text01,marginBottom:titleMargin?theme.spacing[4]:0},topSection:{padding:theme.spacing[4]},bottomSection:{padding:theme.spacing[4],paddingTop:theme.spacing[3],paddingBottom:theme.spacing[3],backgroundColor:bgColor||theme.colors.uiBackground01,position:"relative"},line:{backgroundColor:theme.colors.interactive03h,width:"100%",height:"1px",marginBottom:theme.spacing[4]},bottomSectionBg:{display:bgColor?"block":"none",position:"absolute",zIndex:1,width:"100%",height:"100%",left:0,top:0,backgroundColor:"rgba(246, 245, 247, 0.93)"},bottomSectionContent:{position:"relative",zIndex:2},avatar:{display:"flex",alignItems:"center",color:theme.colors.text03},progress:{display:"flex",alignItems:"end",flexDirection:"column",color:theme.colors.text02,...(0,theme_mixins.Pt)(theme.fontSizes[1])},progressOut:{marginTop:theme.spacing[1],width:"100%",height:"8px",backgroundColor:(0,colord.Vi)(theme.colors.uiBackground03).alpha(.3).toRgbString()},progressIn:{width:`${progress}%`,height:"100%",backgroundColor:theme.colors.uiBackground03},description:{marginBottom:theme.spacing[5]},icon:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:"16px",height:"16px",color:theme.colors.text07,img:{filter:"brightness(0) invert(1)"}}}}));var jsx_runtime=__webpack_require__("../../../node_modules/react/jsx-runtime.js");const KANBAN_TASK_CARD_DEFAULT_PROPS={onClick:()=>{}},ProgressBar=_ref=>{let{value}=_ref;const{classes,cx}=KanbanTaskCardStyles({progress:value});return(0,jsx_runtime.jsxs)(Box.xu,{className:classes.progress,children:[parseInt(value),"%",(0,jsx_runtime.jsx)(Box.xu,{className:classes.progressOut,children:(0,jsx_runtime.jsx)(Box.xu,{className:classes.progressIn})})]})};ProgressBar.displayName="ProgressBar";const KanbanTaskCard=_ref2=>{let{value,config,onClick,labels,...props}=_ref2;const calendar=(0,lodash.find)(config.calendars,{id:value.calendar});if(!calendar)return null;const isFromInstance=!!value?.data?.instanceId,image=value.image,{classes,cx}=KanbanTaskCardStyles({bgColor:value.disableDrag?value.bgColor||calendar.bgColor:null,titleMargin:value.deadline||value.endDate||value?.data?.description||!isFromInstance&&calendar.isUserCalendar}),percentaje=(0,react.useMemo)((()=>{if(value.data&&value.data.subtask&&value.data.subtask.length){const total=value.data.subtask.length,completed=(0,lodash.filter)(value.data.subtask,{checked:!0}).length;return parseInt(completed/total*100)}return null}),[value]),avatar={image:image||null,icon:value.icon?(0,jsx_runtime.jsx)(Box.xu,{className:classes.icon,children:(0,jsx_runtime.jsx)(ImageLoader.S,{height:"14px",imageStyles:{width:14,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},src:value.icon,forceImage:!0})}):null,color:value.bgColor};calendar.isUserCalendar?(avatar.fullName=calendar.fullName,avatar._icon=avatar.icon,avatar.icon=null):avatar.image||avatar.icon||(avatar.image="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=");const{image:a,...avatarNoImage}=avatar;return avatarNoImage.icon||(avatarNoImage.icon=avatarNoImage._icon),(0,jsx_runtime.jsxs)(Paper.Xk,{shadow:"none",className:classes.root,style:{cursor:value.disableDrag?"pointer":"grab"},onClick:()=>onClick(value),children:[(0,jsx_runtime.jsxs)(Box.xu,{className:classes.topSection,children:[(0,jsx_runtime.jsx)(Box.xu,{className:classes.title,children:value.title}),value.deadline||value.endDate||value?.data?.description||!isFromInstance&&calendar.isUserCalendar?(0,jsx_runtime.jsx)(Box.xu,{className:classes.line}):null,value.data&&value.data.description?(0,jsx_runtime.jsx)(Box.xu,{className:classes.description,children:(0,jsx_runtime.jsx)(TextClamp.xR,{lines:1,showTooltip:!0,children:(0,jsx_runtime.jsx)(Text.xv,{role:"productive",children:value.data.description})})}):null,value.deadline&&isFromInstance?(0,jsx_runtime.jsx)(Box.xu,{sx:theme=>({margin:"-0.5rem"})}):value.endDate?(0,jsx_runtime.jsxs)(Text.xv,{size:"xs",children:[labels.delivery," ",dayjs_min_default()(value.endDate).format("DD/MM/YYYY HH:mm")]}):null]}),(0,jsx_runtime.jsxs)(Box.xu,{className:classes.bottomSection,children:[(0,jsx_runtime.jsx)(Box.xu,{className:classes.bottomSectionBg}),(0,jsx_runtime.jsxs)(Box.xu,{className:classes.bottomSectionContent,children:[(0,jsx_runtime.jsxs)(Box.xu,{className:classes.avatar,children:[isFromInstance&&(!isFromInstance||avatar.image&&avatar.icon)?null:(0,jsx_runtime.jsx)(Box.xu,{sx:theme=>({display:"inline-block",zIndex:2,verticalAlign:"middle"}),children:(0,jsx_runtime.jsx)(Avatar.q,{mx:"auto",size:"sm",...avatar})}),avatar.image&&avatarNoImage.icon?(0,jsx_runtime.jsx)(Box.xu,{sx:theme=>({display:"inline-block",marginLeft:-theme.spacing[2],verticalAlign:"middle"}),children:(0,jsx_runtime.jsx)(Avatar.q,{mx:"auto",size:"sm",...avatarNoImage})}):null,value.calendarName?(0,jsx_runtime.jsx)(Paragraph.nv,{size:"xs",sx:theme=>({marginLeft:theme.spacing[2],marginTop:0}),children:value.uniqClasses.length>1&&!isFromInstance?`(${value.uniqClasses.length})`:value.calendarName}):null]}),null!==percentaje?(0,jsx_runtime.jsx)(Box.xu,{children:(0,jsx_runtime.jsx)(ProgressBar,{value:percentaje})}):null]})]})]})};KanbanTaskCard.displayName="KanbanTaskCard",KanbanTaskCard.defaultProps=KANBAN_TASK_CARD_DEFAULT_PROPS,KanbanTaskCard.propTypes={},KanbanTaskCard.__docgenInfo={description:"",methods:[],displayName:"KanbanTaskCard",props:{onClick:{defaultValue:{value:"() => {}",computed:!1},required:!1}}}}}]);